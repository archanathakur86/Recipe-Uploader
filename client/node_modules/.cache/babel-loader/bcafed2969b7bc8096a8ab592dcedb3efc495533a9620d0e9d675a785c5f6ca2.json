{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Routes,Route,useNavigate,useLocation}from'react-router-dom';import SignIn from'./components/Auth/SignIn';import SignUp from'./components/Auth/SignUp';import RecipeView from'./components/RecipeView';import Landing from'./components/Landing';import NewUserDashboard from'./components/NewUserDashboard';import ExistingUserDashboard from'./components/ExistingUserDashboard';import PublicFeed from'./components/PublicFeed';import AddRecipe from'./components/AddRecipe';import MyRecipes from'./components/MyRecipes';import Profile from'./components/Profile';import PublicProfile from'./components/PublicProfile';import'./styles/main.css';import ProfileDrawer from'./components/ProfileDrawer';import api from'./services/api';import{useCallback}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const[user,setUser]=useState(()=>{const raw=localStorage.getItem('user');return raw?JSON.parse(raw):null;});const navigate=useNavigate();const location=useLocation();useEffect(()=>{if(user)localStorage.setItem('user',JSON.stringify(user));else localStorage.removeItem('user');},[user]);const logout=()=>{setUser(null);localStorage.removeItem('token');navigate('/signin');};const[drawerOpen,setDrawerOpen]=useState(false);const[drawerProfile,setDrawerProfile]=useState(null);const[drawerLoading,setDrawerLoading]=useState(false);const openProfile=useCallback(async userId=>{try{setDrawerLoading(true);setDrawerOpen(true);const res=await api.get(\"/users/\".concat(userId,\"/public\"));setDrawerProfile(res.data);}catch(err){console.error('failed to load profile',err);}finally{setDrawerLoading(false);}},[]);useEffect(()=>{const handler=e=>{var _e$detail;if(e!==null&&e!==void 0&&(_e$detail=e.detail)!==null&&_e$detail!==void 0&&_e$detail.id)openProfile(e.detail.id);};window.addEventListener('openProfileDrawer',handler);return()=>window.removeEventListener('openProfileDrawer',handler);},[openProfile]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(ProfileDrawer,{open:drawerOpen,profile:drawerProfile,loading:drawerLoading,onClose:()=>setDrawerOpen(false)}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Landing,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:user&&user.name==='Demo Chef'?/*#__PURE__*/_jsx(ExistingUserDashboard,{user:user}):/*#__PURE__*/_jsx(NewUserDashboard,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",element:/*#__PURE__*/_jsx(SignIn,{onAuth:setUser})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(SignUp,{onAuth:setUser})}),/*#__PURE__*/_jsx(Route,{path:\"/recipe/:id\",element:/*#__PURE__*/_jsx(RecipeView,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/recipes\",element:/*#__PURE__*/_jsx(MyRecipes,{})}),/*#__PURE__*/_jsx(Route,{path:\"/feed\",element:/*#__PURE__*/_jsx(PublicFeed,{})}),/*#__PURE__*/_jsx(Route,{path:\"/add\",element:/*#__PURE__*/_jsx(AddRecipe,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/user/:id\",element:/*#__PURE__*/_jsx(PublicProfile,{})})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","useNavigate","useLocation","SignIn","SignUp","RecipeView","Landing","NewUserDashboard","ExistingUserDashboard","PublicFeed","AddRecipe","MyRecipes","Profile","PublicProfile","ProfileDrawer","api","useCallback","jsx","_jsx","jsxs","_jsxs","App","user","setUser","raw","localStorage","getItem","JSON","parse","navigate","location","setItem","stringify","removeItem","logout","drawerOpen","setDrawerOpen","drawerProfile","setDrawerProfile","drawerLoading","setDrawerLoading","openProfile","userId","res","get","concat","data","err","console","error","handler","e","_e$detail","detail","id","window","addEventListener","removeEventListener","className","children","open","profile","loading","onClose","path","element","name","onAuth"],"sources":["/home/navgurukul/Recipe-upload/my-mern-app/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Routes, Route, useNavigate, useLocation } from 'react-router-dom';\nimport SignIn from './components/Auth/SignIn';\nimport SignUp from './components/Auth/SignUp';\nimport RecipeView from './components/RecipeView';\nimport Landing from './components/Landing';\nimport NewUserDashboard from './components/NewUserDashboard';\nimport ExistingUserDashboard from './components/ExistingUserDashboard';\nimport PublicFeed from './components/PublicFeed';\nimport AddRecipe from './components/AddRecipe';\nimport MyRecipes from './components/MyRecipes';\nimport Profile from './components/Profile';\nimport PublicProfile from './components/PublicProfile';\nimport './styles/main.css';\nimport ProfileDrawer from './components/ProfileDrawer';\nimport api from './services/api';\nimport { useCallback } from 'react';\n\nexport default function App() {\n  const [user, setUser] = useState(() => {\n    const raw = localStorage.getItem('user');\n    return raw ? JSON.parse(raw) : null;\n  });\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    if (user) localStorage.setItem('user', JSON.stringify(user));\n    else localStorage.removeItem('user');\n  }, [user]);\n\n  const logout = () => {\n    setUser(null);\n    localStorage.removeItem('token');\n    navigate('/signin');\n  };\n\n  const [drawerOpen, setDrawerOpen] = useState(false);\n  const [drawerProfile, setDrawerProfile] = useState(null);\n  const [drawerLoading, setDrawerLoading] = useState(false);\n\n  const openProfile = useCallback(async (userId) => {\n    try {\n      setDrawerLoading(true);\n      setDrawerOpen(true);\n      const res = await api.get(`/users/${userId}/public`);\n      setDrawerProfile(res.data);\n    } catch (err) {\n      console.error('failed to load profile', err);\n    } finally {\n      setDrawerLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    const handler = (e) => { if (e?.detail?.id) openProfile(e.detail.id); };\n    window.addEventListener('openProfileDrawer', handler);\n    return () => window.removeEventListener('openProfileDrawer', handler);\n  }, [openProfile]);\n\n  return (\n    <div className=\"app\">\n  <ProfileDrawer open={drawerOpen} profile={drawerProfile} loading={drawerLoading} onClose={() => setDrawerOpen(false)} />\n      <main>\n        <Routes>\n          <Route path=\"/\" element={<Landing />} />\n          <Route\n            path=\"/dashboard\"\n            element={\n              user && user.name === 'Demo Chef'\n                ? <ExistingUserDashboard user={user} />\n                : <NewUserDashboard user={user} />\n            }\n          />\n          <Route path=\"/signin\" element={<SignIn onAuth={setUser} />} />\n          <Route path=\"/signup\" element={<SignUp onAuth={setUser} />} />\n          <Route path=\"/recipe/:id\" element={<RecipeView user={user} />} />\n          <Route path=\"/recipes\" element={<MyRecipes />} />\n          <Route path=\"/feed\" element={<PublicFeed />} />\n          <Route path=\"/add\" element={<AddRecipe user={user} />} />\n          <Route path=\"/profile\" element={<Profile user={user} />} />\n          <Route path=\"/user/:id\" element={<PublicProfile />} />\n        </Routes>\n      </main>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}