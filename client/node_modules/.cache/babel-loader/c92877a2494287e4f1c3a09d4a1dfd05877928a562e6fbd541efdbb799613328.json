{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,Link}from'react-router-dom';import api from'../services/api';import'./profile.css';import estimateCalories from'../services/calorieEstimator';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PublicProfile(){var _process$env$REACT_AP;const{id}=useParams();const[profile,setProfile]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const load=async()=>{try{const r=await api.get(\"/users/\".concat(id,\"/public\"));setProfile(r.data);}catch(err){console.error(err);}setLoading(false);};load();},[id]);if(loading)return/*#__PURE__*/_jsx(\"div\",{style:{padding:24},children:\"Loading...\"});if(!profile)return/*#__PURE__*/_jsx(\"div\",{style:{padding:24},children:\"Profile not found\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{padding:20},children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-meta\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"avatar\",children:profile.avatarUrl?/*#__PURE__*/_jsx(\"img\",{src:profile.avatarUrl.startsWith('http')?profile.avatarUrl:(((_process$env$REACT_AP=process.env.REACT_APP_API_URL)===null||_process$env$REACT_AP===void 0?void 0:_process$env$REACT_AP.replace('/api',''))||'')+profile.avatarUrl,alt:\"avatar\"}):/*#__PURE__*/_jsx(\"span\",{children:(profile.name||'U')[0]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-name\",children:profile.name}),/*#__PURE__*/_jsx(\"div\",{className:\"p-email\",children:profile.bio})]})]})}),/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:16},children:\"Shared Recipes\"}),!profile.recipes||profile.recipes.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"No public recipes yet.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"rl-grid\",style:{marginTop:12},children:profile.recipes.map(r=>{var _process$env$REACT_AP2;return/*#__PURE__*/_jsxs(\"article\",{className:\"rl-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rl-image\",style:{backgroundImage:\"url(\".concat(r.imageUrl?r.imageUrl.startsWith('http')?r.imageUrl:(((_process$env$REACT_AP2=process.env.REACT_APP_API_URL)===null||_process$env$REACT_AP2===void 0?void 0:_process$env$REACT_AP2.replace('/api',''))||'')+r.imageUrl:'/assets/carbonara.jpg',\")\")},children:/*#__PURE__*/_jsxs(\"div\",{className:\"rl-cal\",children:[r.caloriesTotal&&r.caloriesTotal>0?r.caloriesTotal:estimateCalories(r),\" cal\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"rl-body\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"rl-title\",children:/*#__PURE__*/_jsx(Link,{to:\"/recipe/\".concat(r._id),children:r.title})})})]},r._id);})})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","api","estimateCalories","jsx","_jsx","jsxs","_jsxs","PublicProfile","_process$env$REACT_AP","id","profile","setProfile","loading","setLoading","load","r","get","concat","data","err","console","error","style","padding","children","className","avatarUrl","src","startsWith","process","env","REACT_APP_API_URL","replace","alt","name","bio","marginTop","recipes","length","map","_process$env$REACT_AP2","backgroundImage","imageUrl","caloriesTotal","to","_id","title"],"sources":["/home/navgurukul/Recipe-upload/my-mern-app/client/src/components/PublicProfile.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport api from '../services/api';\nimport './profile.css';\nimport estimateCalories from '../services/calorieEstimator';\n\nexport default function PublicProfile() {\n  const { id } = useParams();\n  const [profile, setProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const r = await api.get(`/users/${id}/public`);\n        setProfile(r.data);\n      } catch (err) { console.error(err); }\n      setLoading(false);\n    };\n    load();\n  }, [id]);\n\n  if (loading) return <div style={{ padding: 24 }}>Loading...</div>;\n  if (!profile) return <div style={{ padding: 24 }}>Profile not found</div>;\n\n  return (\n    <div className=\"container\" style={{ padding: 20 }}>\n      <div className=\"profile-header\">\n        <div className=\"profile-meta\">\n          <div className=\"avatar\">{profile.avatarUrl ? <img src={(profile.avatarUrl.startsWith('http') ? profile.avatarUrl : (process.env.REACT_APP_API_URL?.replace('/api','') || '') + profile.avatarUrl)} alt=\"avatar\" /> : <span>{(profile.name || 'U')[0]}</span>}</div>\n          <div>\n            <div className=\"p-name\">{profile.name}</div>\n            <div className=\"p-email\">{profile.bio}</div>\n          </div>\n        </div>\n      </div>\n\n      <h3 style={{ marginTop: 16 }}>Shared Recipes</h3>\n      {(!profile.recipes || profile.recipes.length === 0) ? (\n        <div>No public recipes yet.</div>\n      ) : (\n        <div className=\"rl-grid\" style={{ marginTop: 12 }}>\n          {profile.recipes.map(r => (\n            <article key={r._id} className=\"rl-card\">\n              <div className=\"rl-image\" style={{ backgroundImage: `url(${r.imageUrl ? ((r.imageUrl.startsWith('http') ? r.imageUrl : (process.env.REACT_APP_API_URL?.replace('/api','') || '') + r.imageUrl)) : '/assets/carbonara.jpg'})` }}>\n                <div className=\"rl-cal\">{(r.caloriesTotal && r.caloriesTotal > 0 ? r.caloriesTotal : estimateCalories(r))} cal</div>\n              </div>\n              <div className=\"rl-body\">\n                <h3 className=\"rl-title\"><Link to={`/recipe/${r._id}`}>{r.title}</Link></h3>\n              </div>\n            </article>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}