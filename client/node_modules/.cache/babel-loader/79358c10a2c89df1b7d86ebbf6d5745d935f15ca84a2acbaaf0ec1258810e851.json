{"ast":null,"code":"import _objectSpread from\"/home/navgurukul/Recipe-upload/my-mern-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useRef}from'react';import{Link,useNavigate}from'react-router-dom';import api from'../services/api';import RecipeCard from'./RecipeCard';import ConfirmModal from'./ConfirmModal';import'./profile.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(_ref){var _process$env$REACT_AP;let{user}=_ref;const navigate=useNavigate();const[me,setMe]=useState(user||null);const[editing,setEditing]=useState(false);const[bioDraft,setBioDraft]=useState('');const avatarInput=useRef(null);const[tab,setTab]=useState('overview');const[settingsMsg,setSettingsMsg]=useState(null);const[confirmOpen,setConfirmOpen]=useState(false);const[myRecipes,setMyRecipes]=useState([]);const[favorites,setFavorites]=useState([]);const[orphans,setOrphans]=useState([]);useEffect(()=>{const token=localStorage.getItem('token');if(!token&&!me){navigate('/signin');return;}const load=async()=>{try{const r=await api.get('/users/me');setMe(r.data);setBioDraft(r.data.bio||'');}catch(err){console.error(err);}};load();},[navigate]);useEffect(()=>{if(!me)return;const loadLists=async()=>{try{const mine=await api.get('/recipes/mine');setMyRecipes(mine.data||[]);// refresh orphans when viewing profile (but only when needed)\ntry{const or=await api.get('/recipes/orphans');setOrphans(or.data||[]);}catch(e){var _e$response;// ignore: orphans endpoint may be restricted or empty\nconsole.warn('Failed loading orphans',(e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:_e$response.data)||e.message||e);}// load favorite recipes (user.favorites is array of ids)\nconst favIds=(me.favorites||[]).map(f=>f.toString());const favs=[];for(const id of favIds){try{const res=await api.get(\"/recipes/\".concat(id));favs.push(res.data);}catch(e){/* ignore missing */}}setFavorites(favs);}catch(err){console.error(err);}};loadLists();},[me]);const claimOrphan=async id=>{try{await api.post(\"/recipes/\".concat(id,\"/claim\"));// refresh lists\nconst mine=await api.get('/recipes/mine');setMyRecipes(mine.data||[]);const or=await api.get('/recipes/orphans');setOrphans(or.data||[]);}catch(err){var _err$response,_err$response$data;console.error('Claim failed',err);alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to claim recipe');}};const deleteRecipe=async id=>{if(!window.confirm('Delete this recipe? This cannot be undone.'))return;try{await api.delete(\"/recipes/\".concat(id));const mine=await api.get('/recipes/mine');setMyRecipes(mine.data||[]);// also refresh favorites/orphans\nconst or=await api.get('/recipes/orphans');setOrphans(or.data||[]);}catch(err){var _err$response2,_err$response2$data;console.error('Delete failed',err);alert(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Failed to delete recipe');}};if(!me)return/*#__PURE__*/_jsx(\"div\",{style:{padding:24},children:\"Loading profile...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-root container\",style:{padding:20},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-meta\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"avatar\",children:me.avatarUrl?/*#__PURE__*/_jsx(\"img\",{src:me.avatarUrl.startsWith('http')?me.avatarUrl:(((_process$env$REACT_AP=process.env.REACT_APP_API_URL)===null||_process$env$REACT_AP===void 0?void 0:_process$env$REACT_AP.replace('/api',''))||'')+me.avatarUrl,alt:\"avatar\"}):/*#__PURE__*/_jsx(\"span\",{children:(me.name||'U')[0]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-name\",children:me.name||me.email}),/*#__PURE__*/_jsx(\"div\",{className:\"p-email\",children:me.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:myRecipes.length}),/*#__PURE__*/_jsx(\"div\",{children:\"My Recipes\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:favorites.length}),/*#__PURE__*/_jsx(\"div\",{children:\"Favorites\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:tab==='overview'?'active':'',onClick:()=>setTab('overview'),children:\"Overview\"}),/*#__PURE__*/_jsx(\"button\",{className:tab==='my'?'active':'',onClick:()=>setTab('my'),children:\"My Recipes\"}),/*#__PURE__*/_jsx(\"button\",{className:tab==='fav'?'active':'',onClick:()=>setTab('fav'),children:\"Favorites\"}),/*#__PURE__*/_jsx(\"button\",{className:tab==='settings'?'active':'',onClick:()=>setTab('settings'),children:\"Settings\"}),/*#__PURE__*/_jsx(\"button\",{className:tab==='orphans'?'active':'',onClick:()=>setTab('orphans'),children:\"Orphans\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-body\",children:[tab==='overview'&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:18,alignItems:'flex-start'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Welcome, \",me.name||'Chef',\"!\"]}),/*#__PURE__*/_jsx(\"p\",{children:me.bio||'Tell the community about your cooking style.'}),!editing?/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>setEditing(true),children:\"Edit profile\"}),/*#__PURE__*/_jsx(Link,{to:\"/add\",className:\"btn btn-primary\",style:{marginLeft:8},children:\"Add Recipe\"})]}):/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:8},children:[/*#__PURE__*/_jsx(\"label\",{className:\"label-text\",children:\"Bio\"}),/*#__PURE__*/_jsx(\"textarea\",{value:bioDraft,onChange:e=>setBioDraft(e.target.value),rows:4,style:{width:'100%',padding:8}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"label-text\",children:\"Avatar\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:avatarInput,accept:\"image/*\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:async()=>{const fd=new FormData();fd.append('bio',bioDraft||'');if(avatarInput.current&&avatarInput.current.files[0])fd.append('avatar',avatarInput.current.files[0]);try{const res=await api.put('/users/me',fd,{headers:{'Content-Type':'multipart/form-data'}});setMe(res.data);setEditing(false);}catch(err){console.error(err);alert('Update failed');}},children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",style:{marginLeft:8},onClick:()=>{setEditing(false);setBioDraft(me.bio||'');},children:\"Cancel\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:300},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Activity\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"activity-list\",children:[myRecipes.slice(0,5).map(r=>/*#__PURE__*/_jsxs(\"div\",{className:\"activity-item\",children:[\"Added recipe \",/*#__PURE__*/_jsx(Link,{to:\"/recipe/\".concat(r._id),children:r.title})]},r._id)),favorites.slice(0,5).map(r=>/*#__PURE__*/_jsxs(\"div\",{className:\"activity-item\",children:[\"Favorited \",/*#__PURE__*/_jsx(Link,{to:\"/recipe/\".concat(r._id),children:r.title})]},r._id))]})]})]})}),tab==='my'&&/*#__PURE__*/_jsx(\"div\",{children:myRecipes.length===0?/*#__PURE__*/_jsxs(\"div\",{children:[\"No recipes yet. \",/*#__PURE__*/_jsx(Link,{to:\"/add\",children:\"Add your first recipe\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"rl-grid\",children:myRecipes.map(r=>/*#__PURE__*/_jsx(RecipeCard,{recipe:r,onChange:async()=>{const mine=await api.get('/recipes/mine');setMyRecipes(mine.data||[]);},onDelete:deleteRecipe},r._id))})}),tab==='fav'&&/*#__PURE__*/_jsx(\"div\",{children:favorites.length===0?/*#__PURE__*/_jsxs(\"div\",{children:[\"No favorites yet. Explore the \",/*#__PURE__*/_jsx(Link,{to:\"/feed\",children:\"Public Feed\"}),\".\"]}):/*#__PURE__*/_jsx(\"div\",{className:\"rl-grid\",children:favorites.map(r=>/*#__PURE__*/_jsx(RecipeCard,{recipe:r,onChange:()=>{}},r._id))})}),tab==='settings'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Settings\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Dietary preferences\"}),['Vegetarian','Vegan','Gluten-Free','Dairy-Free','Nut-Free'].map(pref=>/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:8},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:(me.dietaryPreferences||[]).includes(pref),onChange:e=>{const cur=new Set(me.dietaryPreferences||[]);if(e.target.checked)cur.add(pref);else cur.delete(pref);const arr=Array.from(cur);setMe(prev=>_objectSpread(_objectSpread({},prev),{},{dietaryPreferences:arr}));}}),/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:8},children:pref})]},pref)),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:10},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:async()=>{try{const fd=new FormData();fd.append('dietaryPreferences',JSON.stringify(me.dietaryPreferences||[]));await api.put('/users/me',fd);setSettingsMsg('Preferences saved');}catch(err){console.error(err);setSettingsMsg('Save failed');}},children:\"Save preferences\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:18},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Change password\"}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:420},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label-text\",children:\"Current password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"curpass\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label-text\",children:\"New password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"newpass\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:async()=>{const cur=document.getElementById('curpass').value;const nw=document.getElementById('newpass').value;try{var _r$data;const r=await api.put('/users/me/password',{currentPassword:cur,newPassword:nw});setSettingsMsg(((_r$data=r.data)===null||_r$data===void 0?void 0:_r$data.message)||'Password changed');}catch(err){var _err$response3,_err$response3$data;console.error(err);setSettingsMsg(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||'Change failed');}},children:\"Change password\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:18},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Manage account\"}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#861b1b'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>setConfirmOpen(true),children:\"Delete account\"}),settingsMsg&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:settingsMsg}),/*#__PURE__*/_jsx(ConfirmModal,{open:confirmOpen,title:\"Delete account\",message:\"This will permanently remove your account and recipes. Are you sure?\",confirmText:\"Delete\",cancelText:\"Cancel\",onConfirm:async()=>{try{await api.delete('/users/me');// logout locally\nlocalStorage.removeItem('token');localStorage.removeItem('user');window.location.href='/signin';}catch(err){console.error(err);alert('Delete failed');}},onCancel:()=>setConfirmOpen(false)})]})]})]}),tab==='orphans'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Orphan recipes (created while unauthenticated)\"}),orphans.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"No orphan recipes found.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"rl-grid\",children:orphans.map(r=>{var _process$env$REACT_AP2;return/*#__PURE__*/_jsxs(\"div\",{className:\"rl-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rl-image\",style:{backgroundImage:\"url(\".concat(r.imageUrl?r.imageUrl.startsWith('http')?r.imageUrl:(((_process$env$REACT_AP2=process.env.REACT_APP_API_URL)===null||_process$env$REACT_AP2===void 0?void 0:_process$env$REACT_AP2.replace('/api',''))||'')+r.imageUrl:'/assets/carbonara.jpg',\")\")}}),/*#__PURE__*/_jsxs(\"div\",{className:\"rl-body\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"rl-title\",children:r.title}),/*#__PURE__*/_jsx(\"p\",{className:\"rl-desc\",children:r.summary||(r.ingredients||[]).slice(0,4).map(i=>i.name).join(', ')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rl-footer\",style:{display:'flex',gap:8,alignItems:'center'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>claimOrphan(r._id),children:\"Claim\"}),/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'auto'},children:new Date(r.createdAt).toLocaleDateString()})]})]},r._id);})})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","Link","useNavigate","api","RecipeCard","ConfirmModal","jsx","_jsx","jsxs","_jsxs","Profile","_ref","_process$env$REACT_AP","user","navigate","me","setMe","editing","setEditing","bioDraft","setBioDraft","avatarInput","tab","setTab","settingsMsg","setSettingsMsg","confirmOpen","setConfirmOpen","myRecipes","setMyRecipes","favorites","setFavorites","orphans","setOrphans","token","localStorage","getItem","load","r","get","data","bio","err","console","error","loadLists","mine","or","e","_e$response","warn","response","message","favIds","map","f","toString","favs","id","res","concat","push","claimOrphan","post","_err$response","_err$response$data","alert","deleteRecipe","window","confirm","delete","_err$response2","_err$response2$data","style","padding","children","className","avatarUrl","src","startsWith","process","env","REACT_APP_API_URL","replace","alt","name","email","length","onClick","display","gap","alignItems","flex","marginTop","to","marginLeft","marginBottom","value","onChange","target","rows","width","type","ref","accept","fd","FormData","append","current","files","put","headers","slice","_id","title","recipe","onDelete","pref","checked","dietaryPreferences","includes","cur","Set","add","arr","Array","from","prev","_objectSpread","JSON","stringify","maxWidth","document","getElementById","nw","_r$data","currentPassword","newPassword","_err$response3","_err$response3$data","color","open","confirmText","cancelText","onConfirm","removeItem","location","href","onCancel","_process$env$REACT_AP2","backgroundImage","imageUrl","summary","ingredients","i","join","Date","createdAt","toLocaleDateString"],"sources":["/home/navgurukul/Recipe-upload/my-mern-app/client/src/components/Profile.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport api from '../services/api';\nimport RecipeCard from './RecipeCard';\nimport ConfirmModal from './ConfirmModal';\nimport './profile.css';\n\nexport default function Profile({ user }) {\n  const navigate = useNavigate();\n  const [me, setMe] = useState(user || null);\n  const [editing, setEditing] = useState(false);\n  const [bioDraft, setBioDraft] = useState('');\n  const avatarInput = useRef(null);\n  const [tab, setTab] = useState('overview');\n  const [settingsMsg, setSettingsMsg] = useState(null);\n  const [confirmOpen, setConfirmOpen] = useState(false);\n  const [myRecipes, setMyRecipes] = useState([]);\n  const [favorites, setFavorites] = useState([]);\n  const [orphans, setOrphans] = useState([]);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token && !me) {\n      navigate('/signin');\n      return;\n    }\n\n  const load = async () => {\n      try {\n        const r = await api.get('/users/me');\n        setMe(r.data);\n    setBioDraft(r.data.bio || '');\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    load();\n  }, [navigate]);\n\n  useEffect(() => {\n    if (!me) return;\n\n    const loadLists = async () => {\n      try {\n        const mine = await api.get('/recipes/mine');\n        setMyRecipes(mine.data || []);\n\n        // refresh orphans when viewing profile (but only when needed)\n        try {\n          const or = await api.get('/recipes/orphans');\n          setOrphans(or.data || []);\n        } catch (e) {\n          // ignore: orphans endpoint may be restricted or empty\n          console.warn('Failed loading orphans', e?.response?.data || e.message || e);\n        }\n\n        // load favorite recipes (user.favorites is array of ids)\n        const favIds = (me.favorites || []).map(f => f.toString());\n        const favs = [];\n        for (const id of favIds) {\n          try {\n            const res = await api.get(`/recipes/${id}`);\n            favs.push(res.data);\n          } catch (e) { /* ignore missing */ }\n        }\n        setFavorites(favs);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    loadLists();\n  }, [me]);\n\n  const claimOrphan = async (id) => {\n    try {\n      await api.post(`/recipes/${id}/claim`);\n      // refresh lists\n      const mine = await api.get('/recipes/mine');\n      setMyRecipes(mine.data || []);\n      const or = await api.get('/recipes/orphans');\n      setOrphans(or.data || []);\n    } catch (err) {\n      console.error('Claim failed', err);\n      alert(err.response?.data?.message || 'Failed to claim recipe');\n    }\n  };\n\n  const deleteRecipe = async (id) => {\n    if (!window.confirm('Delete this recipe? This cannot be undone.')) return;\n    try {\n      await api.delete(`/recipes/${id}`);\n      const mine = await api.get('/recipes/mine');\n      setMyRecipes(mine.data || []);\n      // also refresh favorites/orphans\n      const or = await api.get('/recipes/orphans');\n      setOrphans(or.data || []);\n    } catch (err) {\n      console.error('Delete failed', err);\n      alert(err.response?.data?.message || 'Failed to delete recipe');\n    }\n  };\n\n  if (!me) return <div style={{ padding: 24 }}>Loading profile...</div>;\n\n  return (\n    <div className=\"profile-root container\" style={{ padding: 20 }}>\n      <div className=\"profile-header\">\n        <div className=\"profile-meta\">\n          <div className=\"avatar\">\n            {me.avatarUrl ? <img src={(me.avatarUrl.startsWith('http') ? me.avatarUrl : (process.env.REACT_APP_API_URL?.replace('/api','') || '') + me.avatarUrl)} alt=\"avatar\" /> : <span>{(me.name || 'U')[0]}</span>}\n          </div>\n          <div>\n            <div className=\"p-name\">{me.name || me.email}</div>\n            <div className=\"p-email\">{me.email}</div>\n          </div>\n        </div>\n\n        <div className=\"profile-stats\">\n          <div><strong>{myRecipes.length}</strong><div>My Recipes</div></div>\n          <div><strong>{favorites.length}</strong><div>Favorites</div></div>\n        </div>\n      </div>\n\n      <div className=\"profile-tabs\">\n        <button className={tab==='overview' ? 'active' : ''} onClick={() => setTab('overview')}>Overview</button>\n        <button className={tab==='my' ? 'active' : ''} onClick={() => setTab('my')}>My Recipes</button>\n        <button className={tab==='fav' ? 'active' : ''} onClick={() => setTab('fav')}>Favorites</button>\n  <button className={tab==='settings' ? 'active' : ''} onClick={() => setTab('settings')}>Settings</button>\n  <button className={tab==='orphans' ? 'active' : ''} onClick={() => setTab('orphans')}>Orphans</button>\n      </div>\n\n      <div className=\"profile-body\">\n        {tab === 'overview' && (\n          <div>\n            <div style={{ display: 'flex', gap: 18, alignItems: 'flex-start' }}>\n              <div style={{flex:1}}>\n                <h3>Welcome, {me.name || 'Chef'}!</h3>\n                <p>{me.bio || 'Tell the community about your cooking style.'}</p>\n                {!editing ? (\n                  <div style={{ marginTop: 12 }}>\n                    <button className=\"btn\" onClick={() => setEditing(true)}>Edit profile</button>\n                    <Link to=\"/add\" className=\"btn btn-primary\" style={{ marginLeft: 8 }}>Add Recipe</Link>\n                  </div>\n                ) : (\n                  <div style={{ marginTop: 12 }}>\n                    <div style={{ marginBottom: 8 }}>\n                      <label className=\"label-text\">Bio</label>\n                      <textarea value={bioDraft} onChange={e => setBioDraft(e.target.value)} rows={4} style={{ width: '100%', padding:8 }} />\n                    </div>\n                    <div>\n                      <label className=\"label-text\">Avatar</label>\n                      <input type=\"file\" ref={avatarInput} accept=\"image/*\" />\n                    </div>\n                    <div style={{ marginTop:10 }}>\n                      <button className=\"btn btn-primary\" onClick={async () => {\n                        const fd = new FormData();\n                        fd.append('bio', bioDraft || '');\n                        if (avatarInput.current && avatarInput.current.files[0]) fd.append('avatar', avatarInput.current.files[0]);\n                        try {\n                          const res = await api.put('/users/me', fd, { headers: { 'Content-Type': 'multipart/form-data' } });\n                          setMe(res.data);\n                          setEditing(false);\n                        } catch (err) { console.error(err); alert('Update failed'); }\n                      }}>Save</button>\n                      <button className=\"btn\" style={{ marginLeft:8 }} onClick={() => { setEditing(false); setBioDraft(me.bio || ''); }}>Cancel</button>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div style={{ width:300 }}>\n                <h4>Activity</h4>\n                <div className=\"activity-list\">\n                  {myRecipes.slice(0,5).map(r => (\n                    <div key={r._id} className=\"activity-item\">Added recipe <Link to={`/recipe/${r._id}`}>{r.title}</Link></div>\n                  ))}\n                  {favorites.slice(0,5).map(r => (\n                    <div key={r._id} className=\"activity-item\">Favorited <Link to={`/recipe/${r._id}`}>{r.title}</Link></div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {tab === 'my' && (\n          <div>\n            {myRecipes.length === 0 ? (\n              <div>No recipes yet. <Link to=\"/add\">Add your first recipe</Link></div>\n            ) : (\n              <div className=\"rl-grid\">\n                {myRecipes.map(r => <RecipeCard key={r._id} recipe={r} onChange={async () => { const mine = await api.get('/recipes/mine'); setMyRecipes(mine.data || []); }} onDelete={deleteRecipe} />)}\n              </div>\n            )}\n          </div>\n        )}\n\n        {tab === 'fav' && (\n          <div>\n            {favorites.length === 0 ? (\n              <div>No favorites yet. Explore the <Link to=\"/feed\">Public Feed</Link>.</div>\n            ) : (\n              <div className=\"rl-grid\">\n                {favorites.map(r => <RecipeCard key={r._id} recipe={r} onChange={() => {}} />)}\n              </div>\n            )}\n          </div>\n        )}\n\n        {tab === 'settings' && (\n          <div>\n            <h3>Settings</h3>\n            <div style={{ marginTop:12 }}>\n              <h4>Dietary preferences</h4>\n              {['Vegetarian','Vegan','Gluten-Free','Dairy-Free','Nut-Free'].map(pref => (\n                <label key={pref} style={{ display:'block', marginBottom:8 }}>\n                  <input type=\"checkbox\" checked={(me.dietaryPreferences||[]).includes(pref)} onChange={e => {\n                    const cur = new Set(me.dietaryPreferences || []);\n                    if (e.target.checked) cur.add(pref); else cur.delete(pref);\n                    const arr = Array.from(cur);\n                    setMe(prev => ({ ...prev, dietaryPreferences: arr }));\n                  }} />\n                  <span style={{ marginLeft:8 }}>{pref}</span>\n                </label>\n              ))}\n              <div style={{ marginTop:10 }}>\n                <button className=\"btn btn-primary\" onClick={async () => {\n                  try {\n                    const fd = new FormData();\n                    fd.append('dietaryPreferences', JSON.stringify(me.dietaryPreferences || []));\n                    await api.put('/users/me', fd);\n                    setSettingsMsg('Preferences saved');\n                  } catch (err) { console.error(err); setSettingsMsg('Save failed'); }\n                }}>Save preferences</button>\n              </div>\n            </div>\n\n            <div style={{ marginTop:18 }}>\n              <h4>Change password</h4>\n              <div style={{ maxWidth:420 }}>\n                <div className=\"field\"><label className=\"label-text\">Current password</label><input type=\"password\" id=\"curpass\" /></div>\n                <div className=\"field\"><label className=\"label-text\">New password</label><input type=\"password\" id=\"newpass\" /></div>\n                <div style={{ marginTop:8 }}>\n                  <button className=\"btn\" onClick={async () => {\n                    const cur = document.getElementById('curpass').value;\n                    const nw = document.getElementById('newpass').value;\n                    try {\n                      const r = await api.put('/users/me/password', { currentPassword: cur, newPassword: nw });\n                      setSettingsMsg(r.data?.message || 'Password changed');\n                    } catch (err) { console.error(err); setSettingsMsg(err.response?.data?.message || 'Change failed'); }\n                  }}>Change password</button>\n                </div>\n              </div>\n            </div>\n\n            <div style={{ marginTop:18 }}>\n              <h4>Manage account</h4>\n              <div style={{ color:'#861b1b' }}>\n                <button className=\"btn\" onClick={() => setConfirmOpen(true)}>Delete account</button>\n                {settingsMsg && <div style={{ marginTop:8 }}>{settingsMsg}</div>}\n                <ConfirmModal open={confirmOpen} title=\"Delete account\" message=\"This will permanently remove your account and recipes. Are you sure?\" confirmText=\"Delete\" cancelText=\"Cancel\" onConfirm={async () => {\n                  try {\n                    await api.delete('/users/me');\n                    // logout locally\n                    localStorage.removeItem('token');\n                    localStorage.removeItem('user');\n                    window.location.href = '/signin';\n                  } catch (err) { console.error(err); alert('Delete failed'); }\n                }} onCancel={() => setConfirmOpen(false)} />\n              </div>\n            </div>\n          </div>\n        )}\n\n        {tab === 'orphans' && (\n          <div>\n            <h3>Orphan recipes (created while unauthenticated)</h3>\n            {orphans.length === 0 ? (\n              <div>No orphan recipes found.</div>\n            ) : (\n              <div className=\"rl-grid\">\n                {orphans.map(r => (\n                  <div key={r._id} className=\"rl-card\">\n                    <div className=\"rl-image\" style={{ backgroundImage: `url(${r.imageUrl ? (r.imageUrl.startsWith('http') ? r.imageUrl : (process.env.REACT_APP_API_URL?.replace('/api','') || '') + r.imageUrl) : '/assets/carbonara.jpg'})` }} />\n                    <div className=\"rl-body\">\n                      <h3 className=\"rl-title\">{r.title}</h3>\n                      <p className=\"rl-desc\">{r.summary || ((r.ingredients||[]).slice(0,4).map(i=>i.name).join(', '))}</p>\n                    </div>\n                    <div className=\"rl-footer\" style={{ display:'flex', gap:8, alignItems:'center' }}>\n                      <button className=\"btn\" onClick={() => claimOrphan(r._id)}>Claim</button>\n                      <span style={{ marginLeft: 'auto' }}>{new Date(r.createdAt).toLocaleDateString()}</span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}