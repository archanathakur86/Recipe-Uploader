{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link,useNavigate}from'react-router-dom';import api from'../services/api';import estimateCalories from'../services/calorieEstimator';import'./newdashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function NewUserDashboard(_ref){let{user}=_ref;const navigate=useNavigate();const name=user&&user.name||'Sakshi Kumari';const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');navigate('/signin');};const goToAdd=()=>{// navigate to the dedicated Add Recipe page\nnavigate('/add');};const[stats,setStats]=useState({totalRecipes:0,totalCalories:0,favorites:0,avgCalories:0});useEffect(()=>{let mounted=true;(async()=>{if(!user)return;try{const res=await api.get('/recipes/mine');const recs=res.data||[];const totalRecipes=recs.length;const totalCalories=recs.reduce((sum,r)=>{const c=r.caloriesTotal&&r.caloriesTotal>0?r.caloriesTotal:estimateCalories(r);return sum+(Number(c)||0);},0);const avgCalories=totalRecipes?Math.round(totalCalories/totalRecipes):0;const favorites=(user.favorites||[]).length||0;if(mounted)setStats({totalRecipes,totalCalories,favorites,avgCalories});}catch(err){console.error(err);}})();return()=>{mounted=false;};},[user]);return/*#__PURE__*/_jsxs(\"div\",{className:\"nud-root\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"nud-topbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nud-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nud-brand\",children:\"HomePlate\"}),/*#__PURE__*/_jsxs(\"nav\",{className:\"nud-nav\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"active\",children:\"Dashboard\"}),/*#__PURE__*/_jsxs(Link,{to:\"/add\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon-circle\",children:\"+\"}),\" Add Recipe\"]}),/*#__PURE__*/_jsx(Link,{to:\"/feed\",children:\"\\uD83C\\uDF10 Public Feed\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nud-right\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"nud-user\",children:name}),/*#__PURE__*/_jsx(\"button\",{className:\"nud-logout\",onClick:handleLogout,children:\"\\u2934 Logout\"})]})]}),/*#__PURE__*/_jsx(\"section\",{className:\"nud-hero\",children:/*#__PURE__*/_jsx(\"div\",{className:\"nud-hero-inner\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome back, \",name,\" !\"]})})}),/*#__PURE__*/_jsxs(\"section\",{className:\"nud-stats container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-num\",children:\"0\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Total Recipes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-num\",children:\"0\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Total Calories\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-num\",children:\"0\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Favorites\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-num\",children:\"0\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Avg Calories\"})]})]}),/*#__PURE__*/_jsx(\"main\",{className:\"nud-empty container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"nud-empty-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"No recipes yet\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Start your culinary journey by adding your first recipe!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"nud-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:goToAdd,children:\"Add Your First Recipe\"}),/*#__PURE__*/_jsx(Link,{className:\"btn-secondary\",to:\"/feed\",children:\"Explore Public Feed\"})]})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","api","estimateCalories","jsx","_jsx","jsxs","_jsxs","NewUserDashboard","_ref","user","navigate","name","handleLogout","localStorage","removeItem","goToAdd","stats","setStats","totalRecipes","totalCalories","favorites","avgCalories","mounted","res","get","recs","data","length","reduce","sum","r","c","caloriesTotal","Number","Math","round","err","console","error","className","children","to","onClick"],"sources":["/home/navgurukul/Recipe-upload/my-mern-app/client/src/components/NewUserDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport api from '../services/api';\nimport estimateCalories from '../services/calorieEstimator';\nimport './newdashboard.css';\n\nexport default function NewUserDashboard({ user }) {\n  const navigate = useNavigate();\n  const name = (user && user.name) || 'Sakshi Kumari';\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    navigate('/signin');\n  };\n\n  const goToAdd = () => {\n    // navigate to the dedicated Add Recipe page\n    navigate('/add');\n  };\n\n  const [stats, setStats] = useState({ totalRecipes: 0, totalCalories: 0, favorites: 0, avgCalories: 0 });\n\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      if (!user) return;\n      try {\n        const res = await api.get('/recipes/mine');\n        const recs = res.data || [];\n        const totalRecipes = recs.length;\n        const totalCalories = recs.reduce((sum, r) => {\n          const c = (r.caloriesTotal && r.caloriesTotal > 0) ? r.caloriesTotal : estimateCalories(r);\n          return sum + (Number(c) || 0);\n        }, 0);\n        const avgCalories = totalRecipes ? Math.round(totalCalories / totalRecipes) : 0;\n        const favorites = (user.favorites || []).length || 0;\n        if (mounted) setStats({ totalRecipes, totalCalories, favorites, avgCalories });\n      } catch (err) { console.error(err); }\n    })();\n    return () => { mounted = false; };\n  }, [user]);\n\n  return (\n    <div className=\"nud-root\">\n      <header className=\"nud-topbar\">\n        <div className=\"nud-left\">\n          <div className=\"nud-brand\">HomePlate</div>\n          <nav className=\"nud-nav\">\n            <Link to=\"/dashboard\" className=\"active\">Dashboard</Link>\n            <Link to=\"/add\"><span className=\"icon-circle\">+\n            </span> Add Recipe</Link>\n            <Link to=\"/feed\">üåê Public Feed</Link>\n          </nav>\n        </div>\n\n        <div className=\"nud-right\">\n          <Link to=\"/profile\" className=\"nud-user\">{name}</Link>\n          <button className=\"nud-logout\" onClick={handleLogout}>‚§¥ Logout</button>\n        </div>\n      </header>\n\n      <section className=\"nud-hero\">\n        <div className=\"nud-hero-inner\">\n          <h1>Welcome back, {name} !</h1>\n        </div>\n      </section>\n\n      <section className=\"nud-stats container\">\n        <div className=\"stat-card\">\n          <div className=\"stat-num\">0</div>\n          <div className=\"stat-label\">Total Recipes</div>\n        </div>\n        <div className=\"stat-card\">\n          <div className=\"stat-num\">0</div>\n          <div className=\"stat-label\">Total Calories</div>\n        </div>\n        <div className=\"stat-card\">\n          <div className=\"stat-num\">0</div>\n          <div className=\"stat-label\">Favorites</div>\n        </div>\n        <div className=\"stat-card\">\n          <div className=\"stat-num\">0</div>\n          <div className=\"stat-label\">Avg Calories</div>\n        </div>\n      </section>\n\n      <main className=\"nud-empty container\">\n        <div className=\"nud-empty-card\">\n          <h2>No recipes yet</h2>\n          <p>Start your culinary journey by adding your first recipe!</p>\n          <div className=\"nud-actions\">\n            <button className=\"btn-primary\" onClick={goToAdd}>Add Your First Recipe</button>\n            <Link className=\"btn-secondary\" to=\"/feed\">Explore Public Feed</Link>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}