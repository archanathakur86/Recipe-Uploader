{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import api from'../services/api';import estimateCalories from'../services/calorieEstimator';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function RecipeView(_ref){var _process$env$REACT_AP;let{user}=_ref;const{id}=useParams();const nav=useNavigate();const[r,setR]=useState(null);useEffect(()=>{api.get(\"/recipes/\".concat(id)).then(res=>setR(res.data)).catch(()=>setR(null));},[id]);if(r===null)return/*#__PURE__*/_jsx(\"div\",{style:{padding:24},children:\"Loading...\"});const isOwner=user&&r.owner&&(user._id===r.owner||user._id===r.owner._id);const handleDelete=async()=>{if(!window.confirm('Delete this recipe?'))return;try{await api.delete(\"/recipes/\".concat(id));nav('/recipes');}catch(err){console.error(err);alert('Delete failed');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{padding:18},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0},children:r.title}),r.owner&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,color:'#475569',marginTop:6},children:[\"By\",' ',/*#__PURE__*/_jsx(\"a\",{href:\"/user/\".concat(r.owner._id?r.owner._id:r.owner),onClick:e=>{e.preventDefault();nav(\"/user/\".concat(r.owner._id?r.owner._id:r.owner));},children:r.owner.name||(typeof r.owner==='string'?r.owner:'Chef')})]})]}),/*#__PURE__*/_jsx(\"div\",{children:isOwner&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{marginRight:8},onClick:()=>nav(\"/recipe/\".concat(id,\"?edit=1\")),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,style:{background:'#ff4d4f',color:'#fff',border:'none',padding:'8px 12px',borderRadius:8},children:\"Delete\"})]})})]}),r.imageUrl&&/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(((_process$env$REACT_AP=process.env.REACT_APP_API_URL)===null||_process$env$REACT_AP===void 0?void 0:_process$env$REACT_AP.replace('/api',''))||'http://localhost:5000').concat(r.imageUrl),alt:\"\",style:{width:'100%',marginTop:12,borderRadius:10}}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Calories:\"}),\" \",r.caloriesTotal&&r.caloriesTotal>0?r.caloriesTotal:estimateCalories(r),\" kcal\"]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Ingredients\"}),/*#__PURE__*/_jsx(\"ul\",{children:(r.ingredients||[]).map((ing,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[ing.name,\" \",ing.quantity?\"(\".concat(ing.quantity,\")\"):'',\" \\u2014 \",ing.calories||'—',\" kcal\"]},i))}),/*#__PURE__*/_jsx(\"h4\",{children:\"Instructions\"}),/*#__PURE__*/_jsx(\"p\",{style:{whiteSpace:'pre-wrap'},children:r.instructions})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","api","estimateCalories","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RecipeView","_ref","_process$env$REACT_AP","user","id","nav","r","setR","get","concat","then","res","data","catch","style","padding","children","isOwner","owner","_id","handleDelete","window","confirm","delete","err","console","error","alert","className","display","justifyContent","alignItems","margin","title","fontSize","color","marginTop","href","onClick","e","preventDefault","name","marginRight","background","border","borderRadius","imageUrl","src","process","env","REACT_APP_API_URL","replace","alt","width","caloriesTotal","ingredients","map","ing","i","quantity","calories","whiteSpace","instructions"],"sources":["/home/navgurukul/Recipe-upload/my-mern-app/client/src/components/RecipeView.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport api from '../services/api';\nimport estimateCalories from '../services/calorieEstimator';\n\nexport default function RecipeView({ user }) {\n  const { id } = useParams();\n  const nav = useNavigate();\n  const [r, setR] = useState(null);\n\n  useEffect(() => { api.get(`/recipes/${id}`).then(res => setR(res.data)).catch(() => setR(null)); }, [id]);\n\n  if (r === null) return <div style={{padding:24}}>Loading...</div>;\n\n  const isOwner = user && r.owner && (user._id === r.owner || user._id === r.owner._id);\n\n  const handleDelete = async () => {\n    if (!window.confirm('Delete this recipe?')) return;\n    try {\n      await api.delete(`/recipes/${id}`);\n      nav('/recipes');\n    } catch (err) {\n      console.error(err);\n      alert('Delete failed');\n    }\n  };\n\n  return (\n    <div className=\"card\" style={{ padding: 18 }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <div>\n          <h2 style={{ margin: 0 }}>{r.title}</h2>\n          {r.owner && (\n            <div style={{ fontSize: 13, color: '#475569', marginTop: 6 }}>\n              By{' '}\n              <a href={`/user/${r.owner._id ? r.owner._id : r.owner}`} onClick={e => { e.preventDefault(); nav(`/user/${r.owner._id ? r.owner._id : r.owner}`); }}>{r.owner.name || (typeof r.owner === 'string' ? r.owner : 'Chef')}</a>\n            </div>\n          )}\n        </div>\n        <div>\n          {isOwner && (\n            <>\n              <button style={{ marginRight: 8 }} onClick={() => nav(`/recipe/${id}?edit=1`)}>Edit</button>\n              <button onClick={handleDelete} style={{ background: '#ff4d4f', color: '#fff', border: 'none', padding: '8px 12px', borderRadius: 8 }}>Delete</button>\n            </>\n          )}\n        </div>\n      </div>\n\n      {r.imageUrl && <img src={`${process.env.REACT_APP_API_URL?.replace('/api','') || 'http://localhost:5000'}${r.imageUrl}`} alt=\"\" style={{ width: '100%', marginTop: 12, borderRadius: 10 }} />}\n  <div style={{ marginTop: 10 }}><strong>Calories:</strong> {(r.caloriesTotal && r.caloriesTotal > 0 ? r.caloriesTotal : estimateCalories(r))} kcal</div>\n      <h4>Ingredients</h4>\n      <ul>{(r.ingredients || []).map((ing, i) => <li key={i}>{ing.name} {ing.quantity ? `(${ing.quantity})` : ''} — {ing.calories || '—'} kcal</li>)}</ul>\n      <h4>Instructions</h4>\n      <p style={{ whiteSpace: 'pre-wrap' }}>{r.instructions}</p>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}