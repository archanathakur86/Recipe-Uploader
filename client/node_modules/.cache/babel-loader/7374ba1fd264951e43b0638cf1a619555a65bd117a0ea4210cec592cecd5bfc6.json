{"ast":null,"code":"var _jsxFileName = \"/home/navgurukul/Recipe-upload/my-mern-app/client/src/components/RecipeCard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport estimateCalories from '../services/calorieEstimator';\nimport { Link } from 'react-router-dom';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction resolveImageSrc(r = {}) {\n  const candidates = [];\n  const pushStr = v => {\n    if (typeof v === 'string' && v.trim()) candidates.push(v.trim());\n  };\n  const pushObj = v => {\n    if (v && typeof v === 'object') {\n      pushStr(v.url || v.path || v.src);\n    }\n  };\n  pushStr(r.imageUrl);\n  pushStr(r.image);\n  pushStr(r.photo);\n  pushStr(r.coverUrl);\n  pushStr(r.imagePath);\n  pushStr(r.img);\n  pushObj(r.image);\n  const val = candidates.find(Boolean);\n  if (!val) return '';\n  const isHttp = /^https?:\\/\\//i.test(val);\n  if (isHttp) return val;\n  let origin = '';\n  try {\n    var _api$defaults;\n    const base = (api === null || api === void 0 ? void 0 : (_api$defaults = api.defaults) === null || _api$defaults === void 0 ? void 0 : _api$defaults.baseURL) || '';\n    if (base) {\n      const u = new URL(base, window.location.origin);\n      origin = u.origin; // e.g., http://localhost:5000 if base is http://localhost:5000/api\n    }\n  } catch (_) {}\n  if (!origin) {\n    origin = window.location.origin.includes(':300') ? 'http://localhost:5000' : window.location.origin;\n  }\n  const path = val.replace(/^\\.+\\/?/, '').replace(/^\\/?/, '');\n  return `${origin}/${path}`;\n}\n\n// Derive a human-friendly taste summary from recipe data\nfunction tasteFromRecipe(r = {}) {\n  // ...existing taste logic...\n  const title = String(r.title || '').toLowerCase();\n  const cuisine = String(r.cuisine || '').toLowerCase();\n  const desc = String(r.description || '').toLowerCase();\n  const ingredients = Array.isArray(r.ingredients) ? r.ingredients.map(x => String(x).toLowerCase()) : [];\n  if (typeof r.taste === 'string' && r.taste.trim()) return r.taste;\n  const tags = new Set();\n  const hasAny = arr => arr.some(k => title.includes(k) || desc.includes(k) || ingredients.some(i => i.includes(k)));\n  if (hasAny(['chilli', 'chili', 'red chilli', 'green chilli', 'garam masala', 'pepper', 'cayenne'])) tags.add('Spicy');\n  if (hasAny(['tomato', 'lemon', 'lime', 'vinegar', 'tamarind', 'yogurt', 'curd'])) tags.add('Tangy');\n  if (hasAny(['garlic'])) tags.add('Garlicky');\n  if (hasAny(['basil', 'oregano', 'parsley', 'cilantro', 'coriander leaves', 'mint'])) tags.add('Herby');\n  if (hasAny(['cream', 'butter', 'ghee', 'milk', 'paneer', 'cheese'])) tags.add('Rich & creamy');\n  if (hasAny(['soy sauce', 'mushroom', 'umami'])) tags.add('Umami');\n  if (hasAny(['smoked', 'tandoor', 'charred'])) tags.add('Smoky');\n  if (hasAny(['honey', 'sweet', 'caramelized'])) tags.add('Sweet-savory');\n  if (title.includes('salad') || desc.includes('salad')) {\n    tags.add('Fresh');\n  }\n  if (title.includes('pulao') || desc.includes('pulao')) tags.add('Fragrant');\n  if (cuisine.includes('indian')) tags.add('Aromatic spices');\n  if (cuisine.includes('italian')) {\n    tags.add('Savory');\n    tags.add('Herby');\n  }\n  const list = Array.from(tags).slice(0, 3);\n  return list.length ? list.join(', ') : 'Balanced, home-style flavors';\n}\nexport default function RecipeCard({\n  recipe,\n  onChange,\n  onDelete,\n  onOpen\n}) {\n  _s();\n  var _process$env$REACT_AP, _recipe$owner, _recipe$owner2, _recipe$owner3;\n  const base = ((_process$env$REACT_AP = process.env.REACT_APP_API_URL) === null || _process$env$REACT_AP === void 0 ? void 0 : _process$env$REACT_AP.replace('/api', '')) || 'http://localhost:5000';\n  const [liked, setLiked] = useState(false);\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem('user');\n      if (!raw) return setLiked(false);\n      const me = JSON.parse(raw);\n      const favs = me && (me.favorites || []);\n      setLiked(Array.isArray(favs) && favs.findIndex(f => f && f.toString() === (recipe._id || '').toString()) !== -1);\n    } catch (err) {\n      setLiked(false);\n    }\n  }, [recipe._id]);\n  const isOwner = (() => {\n    try {\n      const raw = localStorage.getItem('user');\n      if (!raw) return false;\n      const me = JSON.parse(raw);\n      const meId = me._id || me.id || me;\n      const ownerId = recipe.owner && (recipe.owner._id ? recipe.owner._id : recipe.owner);\n      return !!(meId && ownerId && meId.toString() === ownerId.toString());\n    } catch (err) {\n      return false;\n    }\n  })();\n  const toggleFav = async e => {\n    e && e.stopPropagation();\n    try {\n      const next = !liked;\n      setLiked(next);\n      const res = await api.post(`/recipes/${recipe._id}/favorite`);\n      try {\n        const raw = localStorage.getItem('user');\n        if (raw) {\n          const me = JSON.parse(raw);\n          if (res && res.favorites) me.favorites = res.favorites;else {\n            me.favorites = me.favorites || [];\n            const idx = me.favorites.findIndex(f => f && f.toString() === recipe._id.toString());\n            if (next && idx === -1) me.favorites.push(recipe._id);\n            if (!next && idx !== -1) me.favorites.splice(idx, 1);\n          }\n          localStorage.setItem('user', JSON.stringify(me));\n        }\n      } catch (err) {}\n      onChange && onChange();\n    } catch (err) {\n      console.error('favorite failed', err);\n      setLiked(prev => !prev);\n      if (err.response && err.response.status === 401) alert('Please sign in to favorite recipes');\n    }\n  };\n  const openProfile = (id, e) => {\n    e && e.stopPropagation();\n    window.dispatchEvent(new CustomEvent('openProfileDrawer', {\n      detail: {\n        id\n      }\n    }));\n  };\n  const handleOpen = e => {\n    if (onOpen) onOpen(recipe);\n  };\n\n  // no inline dropdown here; header will show user dropdown\n\n  const shareRecipe = async e => {\n    e && e.stopPropagation();\n    try {\n      // record share on server\n      try {\n        await api.post(`/recipes/${recipe._id}/share`);\n      } catch (e) {/* non-blocking */}\n      const url = window.location.origin + `/recipe/${recipe._id}`;\n      const shareData = {\n        title: recipe.title,\n        text: shortDesc,\n        url\n      };\n      if (navigator.share) {\n        await navigator.share(shareData);\n      } else if (navigator.clipboard && navigator.clipboard.writeText) {\n        await navigator.clipboard.writeText(url);\n        alert('Recipe link copied to clipboard');\n      } else {\n        // fallback: create temporary input\n        const tmp = document.createElement('input');\n        document.body.appendChild(tmp);\n        tmp.value = url;\n        tmp.select();\n        document.execCommand('copy');\n        document.body.removeChild(tmp);\n        alert('Recipe link copied to clipboard');\n      }\n    } catch (err) {\n      console.error('share failed', err);\n      alert('Could not share the recipe');\n    }\n  };\n\n  // short description fallback\n  const shortDesc = recipe.summary || (recipe.ingredients || []).slice(0, 4).map(i => i.name).join(', ');\n  const taste = tasteFromRecipe(recipe);\n  const imgSrc = resolveImageSrc(recipe);\n\n  // Health Shield Component\n  const HealthShield = ({\n    score,\n    warnings\n  }) => {\n    const getShieldColor = () => {\n      if (warnings) return '#FFA500'; // Yellow/Orange for warnings\n      if (score >= 8) return '#22C55E'; // Green for healthy\n      if (score < 5) return '#EF4444'; // Red for unhealthy\n      return '#9CA3AF'; // Gray for unverified\n    };\n    const getShieldStatus = () => {\n      if (warnings) return 'Warning';\n      if (score >= 8) return 'Verified Healthy';\n      if (score < 5) return 'Health Concerns';\n      return 'Not Verified';\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"health-shield-wrapper\",\n      title: warnings || getShieldStatus(),\n      style: {\n        display: 'inline-flex',\n        alignItems: 'center',\n        gap: '4px',\n        marginLeft: '8px',\n        cursor: 'help',\n        position: 'relative'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        width: \"18\",\n        height: \"18\",\n        viewBox: \"0 0 24 24\",\n        fill: getShieldColor(),\n        style: {\n          filter: 'drop-shadow(0 1px 2px rgba(0,0,0,0.1))'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M12 2L4 6v6c0 5.5 3.8 10.7 8 12 4.2-1.3 8-6.5 8-12V6l-8-4zm0 18.5c-3.2-1.2-6-5.2-6-9.5V7.3l6-3 6 3v3.7c0 4.3-2.8 8.3-6 9.5z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), score >= 8 && !warnings && /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M9 12l2 2 4-4\",\n          stroke: \"white\",\n          strokeWidth: \"2\",\n          fill: \"none\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this), (score < 5 || warnings) && /*#__PURE__*/_jsxDEV(\"text\", {\n          x: \"12\",\n          y: \"16\",\n          fontSize: \"14\",\n          fontWeight: \"bold\",\n          fill: \"white\",\n          textAnchor: \"middle\",\n          children: \"!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"health-tooltip\",\n        style: {\n          position: 'absolute',\n          bottom: '100%',\n          left: '50%',\n          transform: 'translateX(-50%)',\n          marginBottom: '8px',\n          padding: '8px 12px',\n          background: 'rgba(0, 0, 0, 0.9)',\n          color: 'white',\n          borderRadius: '6px',\n          fontSize: '12px',\n          whiteSpace: 'nowrap',\n          opacity: 0,\n          pointerEvents: 'none',\n          transition: 'opacity 0.2s',\n          zIndex: 1000\n        },\n        children: [warnings ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u26A0\\uFE0F Warning:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this), \" \", warnings]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [\"Score: \", score, \"/10\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this), \" - \", getShieldStatus()]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '100%',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            width: 0,\n            height: 0,\n            borderLeft: '6px solid transparent',\n            borderRight: '6px solid transparent',\n            borderTop: '6px solid rgba(0, 0, 0, 0.9)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"recipe-card card\",\n    onClick: handleOpen,\n    style: {\n      cursor: onOpen ? 'pointer' : 'default'\n    },\n    children: [imgSrc && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rl-media\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"rl-img\",\n        src: imgSrc,\n        alt: (recipe === null || recipe === void 0 ? void 0 : recipe.title) || 'Recipe image',\n        loading: \"lazy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rl-body\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/recipe/${recipe._id}`,\n        className: \"rl-title\",\n        onClick: e => {\n          e.stopPropagation();\n        },\n        children: recipe.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"rl-desc\",\n        children: taste\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), recipe.owner && recipe.owner.name ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"owner-inline\",\n        onClick: e => {\n          e.stopPropagation();\n          openProfile(recipe.owner._id || recipe.owner, e);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"owner-inline-avatar\",\n          src: (_recipe$owner = recipe.owner) !== null && _recipe$owner !== void 0 && _recipe$owner.avatarUrl ? recipe.owner.avatarUrl.startsWith(\"http\") ? recipe.owner.avatarUrl : base + recipe.owner.avatarUrl : '/assets/avatar-placeholder.png',\n          alt: ((_recipe$owner2 = recipe.owner) === null || _recipe$owner2 === void 0 ? void 0 : _recipe$owner2.name) || 'author'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"owner-inline-name\",\n          children: (_recipe$owner3 = recipe.owner) === null || _recipe$owner3 === void 0 ? void 0 : _recipe$owner3.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 11\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rl-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rl-date\",\n          children: [recipe.caloriesTotal && recipe.caloriesTotal > 0 ? recipe.caloriesTotal : estimateCalories(recipe), \" kcal\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rl-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleFav,\n            title: \"Favorite\",\n            className: \"icon-btn\",\n            style: {\n              background: 'transparent',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: 16\n            },\n            children: liked ? '‚ù§Ô∏è' : 'ü§ç'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: shareRecipe,\n            title: \"Share\",\n            className: \"icon-btn\",\n            style: {\n              background: 'transparent',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: 16,\n              marginLeft: 6\n            },\n            children: \"\\uD83D\\uDD17\\xA0Share\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), onDelete && isOwner && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              e.stopPropagation();\n              if (window.confirm('Delete this recipe? This cannot be undone.')) {\n                onDelete(recipe._id);\n              }\n            },\n            title: \"Delete\",\n            className: \"icon-btn\",\n            style: {\n              marginLeft: 8\n            },\n            children: \"\\uD83D\\uDDD1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"recipe-calories\",\n      children: [\"\\uD83D\\uDD25 \", recipe.caloriesTotal || 'N/A', \" cal\", recipe.healthScore && /*#__PURE__*/_jsxDEV(HealthShield, {\n        score: recipe.healthScore,\n        warnings: recipe.healthWarnings\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 264,\n    columnNumber: 5\n  }, this);\n}\n\n// Add CSS for health shield hover effect\n_s(RecipeCard, \"XVwEQrglgvKg4vWDDJzGSUieNRY=\");\n_c = RecipeCard;\nconst style = document.createElement('style');\nstyle.textContent = `\n  .health-shield-wrapper:hover .health-tooltip {\n    opacity: 1 !important;\n  }\n`;\ndocument.head.appendChild(style);\nvar _c;\n$RefreshReg$(_c, \"RecipeCard\");","map":{"version":3,"names":["React","useEffect","useState","estimateCalories","Link","api","jsxDEV","_jsxDEV","Fragment","_Fragment","resolveImageSrc","r","candidates","pushStr","v","trim","push","pushObj","url","path","src","imageUrl","image","photo","coverUrl","imagePath","img","val","find","Boolean","isHttp","test","origin","_api$defaults","base","defaults","baseURL","u","URL","window","location","_","includes","replace","tasteFromRecipe","title","String","toLowerCase","cuisine","desc","description","ingredients","Array","isArray","map","x","taste","tags","Set","hasAny","arr","some","k","i","add","list","from","slice","length","join","RecipeCard","recipe","onChange","onDelete","onOpen","_s","_process$env$REACT_AP","_recipe$owner","_recipe$owner2","_recipe$owner3","process","env","REACT_APP_API_URL","liked","setLiked","raw","localStorage","getItem","me","JSON","parse","favs","favorites","findIndex","f","toString","_id","err","isOwner","meId","id","ownerId","owner","toggleFav","e","stopPropagation","next","res","post","idx","splice","setItem","stringify","console","error","prev","response","status","alert","openProfile","dispatchEvent","CustomEvent","detail","handleOpen","shareRecipe","shareData","text","shortDesc","navigator","share","clipboard","writeText","tmp","document","createElement","body","appendChild","value","select","execCommand","removeChild","summary","name","imgSrc","HealthShield","score","warnings","getShieldColor","getShieldStatus","className","style","display","alignItems","gap","marginLeft","cursor","position","children","width","height","viewBox","fill","filter","d","fileName","_jsxFileName","lineNumber","columnNumber","stroke","strokeWidth","strokeLinecap","strokeLinejoin","y","fontSize","fontWeight","textAnchor","bottom","left","transform","marginBottom","padding","background","color","borderRadius","whiteSpace","opacity","pointerEvents","transition","zIndex","top","borderLeft","borderRight","borderTop","onClick","alt","loading","to","avatarUrl","startsWith","caloriesTotal","border","confirm","healthScore","healthWarnings","_c","textContent","head","$RefreshReg$"],"sources":["/home/navgurukul/Recipe-upload/my-mern-app/client/src/components/RecipeCard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport estimateCalories from '../services/calorieEstimator';\nimport { Link } from 'react-router-dom';\nimport api from '../services/api';\n\nfunction resolveImageSrc(r = {}) {\n  const candidates = [];\n  const pushStr = (v) => { if (typeof v === 'string' && v.trim()) candidates.push(v.trim()); };\n  const pushObj = (v) => { if (v && typeof v === 'object') { pushStr(v.url || v.path || v.src); } };\n\n  pushStr(r.imageUrl);\n  pushStr(r.image);\n  pushStr(r.photo);\n  pushStr(r.coverUrl);\n  pushStr(r.imagePath);\n  pushStr(r.img);\n  pushObj(r.image);\n\n  const val = candidates.find(Boolean);\n  if (!val) return '';\n\n  const isHttp = /^https?:\\/\\//i.test(val);\n  if (isHttp) return val;\n\n  let origin = '';\n  try {\n    const base = api?.defaults?.baseURL || '';\n    if (base) {\n      const u = new URL(base, window.location.origin);\n      origin = u.origin; // e.g., http://localhost:5000 if base is http://localhost:5000/api\n    }\n  } catch (_) {}\n  if (!origin) {\n    origin = window.location.origin.includes(':300') ? 'http://localhost:5000' : window.location.origin;\n  }\n\n  const path = val.replace(/^\\.+\\/?/, '').replace(/^\\/?/, '');\n  return `${origin}/${path}`;\n}\n\n// Derive a human-friendly taste summary from recipe data\nfunction tasteFromRecipe(r = {}) {\n  // ...existing taste logic...\n  const title = String(r.title || '').toLowerCase();\n  const cuisine = String(r.cuisine || '').toLowerCase();\n  const desc = String(r.description || '').toLowerCase();\n  const ingredients = Array.isArray(r.ingredients) ? r.ingredients.map(x => String(x).toLowerCase()) : [];\n  if (typeof r.taste === 'string' && r.taste.trim()) return r.taste;\n  const tags = new Set();\n  const hasAny = (arr) => arr.some(k => title.includes(k) || desc.includes(k) || ingredients.some(i => i.includes(k)));\n  if (hasAny(['chilli','chili','red chilli','green chilli','garam masala','pepper','cayenne'])) tags.add('Spicy');\n  if (hasAny(['tomato','lemon','lime','vinegar','tamarind','yogurt','curd'])) tags.add('Tangy');\n  if (hasAny(['garlic'])) tags.add('Garlicky');\n  if (hasAny(['basil','oregano','parsley','cilantro','coriander leaves','mint'])) tags.add('Herby');\n  if (hasAny(['cream','butter','ghee','milk','paneer','cheese'])) tags.add('Rich & creamy');\n  if (hasAny(['soy sauce','mushroom','umami'])) tags.add('Umami');\n  if (hasAny(['smoked','tandoor','charred'])) tags.add('Smoky');\n  if (hasAny(['honey','sweet','caramelized'])) tags.add('Sweet-savory');\n  if (title.includes('salad') || desc.includes('salad')) { tags.add('Fresh'); }\n  if (title.includes('pulao') || desc.includes('pulao')) tags.add('Fragrant');\n  if (cuisine.includes('indian')) tags.add('Aromatic spices');\n  if (cuisine.includes('italian')) { tags.add('Savory'); tags.add('Herby'); }\n  const list = Array.from(tags).slice(0, 3);\n  return list.length ? list.join(', ') : 'Balanced, home-style flavors';\n}\n\nexport default function RecipeCard({ recipe, onChange, onDelete, onOpen }) {\n  const base = process.env.REACT_APP_API_URL?.replace('/api','') || 'http://localhost:5000';\n\n  const [liked, setLiked] = useState(false);\n\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem('user');\n      if (!raw) return setLiked(false);\n      const me = JSON.parse(raw);\n      const favs = me && (me.favorites || []);\n      setLiked(Array.isArray(favs) && favs.findIndex(f => f && f.toString() === (recipe._id || '').toString()) !== -1);\n    } catch (err) {\n      setLiked(false);\n    }\n  }, [recipe._id]);\n\n  const isOwner = (() => {\n    try {\n      const raw = localStorage.getItem('user');\n      if (!raw) return false;\n      const me = JSON.parse(raw);\n      const meId = me._id || me.id || me;\n      const ownerId = recipe.owner && (recipe.owner._id ? recipe.owner._id : recipe.owner);\n      return !!(meId && ownerId && meId.toString() === ownerId.toString());\n    } catch (err) { return false; }\n  })();\n\n  const toggleFav = async (e) => {\n    e && e.stopPropagation();\n    try {\n      const next = !liked;\n      setLiked(next);\n\n      const res = await api.post(`/recipes/${recipe._id}/favorite`);\n      try {\n        const raw = localStorage.getItem('user');\n        if (raw) {\n          const me = JSON.parse(raw);\n          if (res && res.favorites) me.favorites = res.favorites;\n          else {\n            me.favorites = me.favorites || [];\n            const idx = me.favorites.findIndex(f => f && f.toString() === recipe._id.toString());\n            if (next && idx === -1) me.favorites.push(recipe._id);\n            if (!next && idx !== -1) me.favorites.splice(idx, 1);\n          }\n          localStorage.setItem('user', JSON.stringify(me));\n        }\n      } catch (err) { }\n\n      onChange && onChange();\n    } catch (err) {\n      console.error('favorite failed', err);\n      setLiked(prev => !prev);\n      if (err.response && err.response.status === 401) alert('Please sign in to favorite recipes');\n    }\n  };\n\n  const openProfile = (id, e) => {\n    e && e.stopPropagation();\n    window.dispatchEvent(new CustomEvent('openProfileDrawer', { detail: { id } }));\n  };\n\n  const handleOpen = (e) => {\n    if (onOpen) onOpen(recipe);\n  };\n\n  // no inline dropdown here; header will show user dropdown\n\n  const shareRecipe = async (e) => {\n    e && e.stopPropagation();\n    try {\n      // record share on server\n      try { await api.post(`/recipes/${recipe._id}/share`); } catch (e) { /* non-blocking */ }\n\n      const url = window.location.origin + `/recipe/${recipe._id}`;\n      const shareData = { title: recipe.title, text: shortDesc, url };\n      if (navigator.share) {\n        await navigator.share(shareData);\n      } else if (navigator.clipboard && navigator.clipboard.writeText) {\n        await navigator.clipboard.writeText(url);\n        alert('Recipe link copied to clipboard');\n      } else {\n        // fallback: create temporary input\n        const tmp = document.createElement('input');\n        document.body.appendChild(tmp);\n        tmp.value = url;\n        tmp.select();\n        document.execCommand('copy');\n        document.body.removeChild(tmp);\n        alert('Recipe link copied to clipboard');\n      }\n    } catch (err) {\n      console.error('share failed', err);\n      alert('Could not share the recipe');\n    }\n  };\n\n  // short description fallback\n  const shortDesc = recipe.summary || ((recipe.ingredients || []).slice(0,4).map(i=>i.name).join(', '));\n  const taste = tasteFromRecipe(recipe);\n  const imgSrc = resolveImageSrc(recipe);\n\n  // Health Shield Component\n  const HealthShield = ({ score, warnings }) => {\n    const getShieldColor = () => {\n      if (warnings) return '#FFA500'; // Yellow/Orange for warnings\n      if (score >= 8) return '#22C55E'; // Green for healthy\n      if (score < 5) return '#EF4444'; // Red for unhealthy\n      return '#9CA3AF'; // Gray for unverified\n    };\n\n    const getShieldStatus = () => {\n      if (warnings) return 'Warning';\n      if (score >= 8) return 'Verified Healthy';\n      if (score < 5) return 'Health Concerns';\n      return 'Not Verified';\n    };\n\n    return (\n      <div \n        className=\"health-shield-wrapper\"\n        title={warnings || getShieldStatus()}\n        style={{\n          display: 'inline-flex',\n          alignItems: 'center',\n          gap: '4px',\n          marginLeft: '8px',\n          cursor: 'help',\n          position: 'relative'\n        }}\n      >\n        <svg \n          width=\"18\" \n          height=\"18\" \n          viewBox=\"0 0 24 24\" \n          fill={getShieldColor()}\n          style={{ filter: 'drop-shadow(0 1px 2px rgba(0,0,0,0.1))' }}\n        >\n          <path d=\"M12 2L4 6v6c0 5.5 3.8 10.7 8 12 4.2-1.3 8-6.5 8-12V6l-8-4zm0 18.5c-3.2-1.2-6-5.2-6-9.5V7.3l6-3 6 3v3.7c0 4.3-2.8 8.3-6 9.5z\"/>\n          {score >= 8 && !warnings && (\n            <path d=\"M9 12l2 2 4-4\" stroke=\"white\" strokeWidth=\"2\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          )}\n          {(score < 5 || warnings) && (\n            <text x=\"12\" y=\"16\" fontSize=\"14\" fontWeight=\"bold\" fill=\"white\" textAnchor=\"middle\">!</text>\n          )}\n        </svg>\n        \n        {/* Tooltip */}\n        <div \n          className=\"health-tooltip\"\n          style={{\n            position: 'absolute',\n            bottom: '100%',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            marginBottom: '8px',\n            padding: '8px 12px',\n            background: 'rgba(0, 0, 0, 0.9)',\n            color: 'white',\n            borderRadius: '6px',\n            fontSize: '12px',\n            whiteSpace: 'nowrap',\n            opacity: 0,\n            pointerEvents: 'none',\n            transition: 'opacity 0.2s',\n            zIndex: 1000\n          }}\n        >\n          {warnings ? (\n            <>\n              <strong>‚ö†Ô∏è Warning:</strong> {warnings}\n            </>\n          ) : (\n            <>\n              <strong>Score: {score}/10</strong> - {getShieldStatus()}\n            </>\n          )}\n          <div\n            style={{\n              position: 'absolute',\n              top: '100%',\n              left: '50%',\n              transform: 'translateX(-50%)',\n              width: 0,\n              height: 0,\n              borderLeft: '6px solid transparent',\n              borderRight: '6px solid transparent',\n              borderTop: '6px solid rgba(0, 0, 0, 0.9)'\n            }}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"recipe-card card\" onClick={handleOpen} style={{ cursor: onOpen ? 'pointer' : 'default' }}>\n      {imgSrc && (\n        <div className=\"rl-media\">\n          <img className=\"rl-img\" src={imgSrc} alt={recipe?.title || 'Recipe image'} loading=\"lazy\" />\n        </div>\n      )}\n      <div className=\"rl-body\">\n        <Link to={`/recipe/${recipe._id}`} className=\"rl-title\" onClick={(e)=>{ e.stopPropagation(); }}>{recipe.title}</Link>\n        <p className=\"rl-desc\">{taste}</p>\n        {recipe.owner && recipe.owner.name ? (\n          <div className=\"owner-inline\" onClick={(e) => { e.stopPropagation(); openProfile(recipe.owner._id || recipe.owner, e); }}>\n            <img className=\"owner-inline-avatar\" src={recipe.owner?.avatarUrl ? (recipe.owner.avatarUrl.startsWith(\"http\") ? recipe.owner.avatarUrl : base + recipe.owner.avatarUrl) : '/assets/avatar-placeholder.png'} alt={recipe.owner?.name || 'author'} />\n            <span className=\"owner-inline-name\">{recipe.owner?.name}</span>\n          </div>\n        ) : null}\n\n        <div className=\"rl-footer\">\n          <div className=\"rl-date\">{(recipe.caloriesTotal && recipe.caloriesTotal > 0 ? recipe.caloriesTotal : estimateCalories(recipe))} kcal</div>\n          <div className=\"rl-actions\">\n            <button onClick={toggleFav} title=\"Favorite\" className=\"icon-btn\" style={{ background: 'transparent', border: 'none', cursor: 'pointer', fontSize: 16 }}>\n              {liked ? '‚ù§Ô∏è' : 'ü§ç'}\n            </button>\n            <button onClick={shareRecipe} title=\"Share\" className=\"icon-btn\" style={{ background: 'transparent', border: 'none', cursor: 'pointer', fontSize: 16, marginLeft: 6 }}>üîó&nbsp;Share</button>\n            {onDelete && isOwner && (\n              <button onClick={(e) => { e.stopPropagation(); if (window.confirm('Delete this recipe? This cannot be undone.')) { onDelete(recipe._id); } }} title=\"Delete\" className=\"icon-btn\" style={{ marginLeft: 8 }}>üóë</button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Calorie count with health shield */}\n      <div className=\"recipe-calories\">\n        üî• {recipe.caloriesTotal || 'N/A'} cal\n        {recipe.healthScore && (\n          <HealthShield \n            score={recipe.healthScore} \n            warnings={recipe.healthWarnings} \n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Add CSS for health shield hover effect\nconst style = document.createElement('style');\nstyle.textContent = `\n  .health-shield-wrapper:hover .health-tooltip {\n    opacity: 1 !important;\n  }\n`;\ndocument.head.appendChild(style);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}