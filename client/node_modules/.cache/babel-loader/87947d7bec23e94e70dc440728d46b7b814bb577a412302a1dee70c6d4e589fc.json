{"ast":null,"code":"import React from'react';import estimateCalories from'../services/calorieEstimator';import{Link}from'react-router-dom';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function RecipeCard(_ref){var _process$env$REACT_AP;let{recipe,onChange,onDelete}=_ref;const toggleFav=async()=>{try{await api.post(\"/recipes/\".concat(recipe._id,\"/favorite\"));onChange();}catch(err){console.error(err);}};const base=((_process$env$REACT_AP=process.env.REACT_APP_API_URL)===null||_process$env$REACT_AP===void 0?void 0:_process$env$REACT_AP.replace('/api',''))||'http://localhost:5000';const openProfile=id=>{// dispatch a custom event so feed/listening components can open the drawer\nwindow.dispatchEvent(new CustomEvent('openProfileDrawer',{detail:{id}}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-card card\",children:[recipe.imageUrl&&/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(base).concat(recipe.imageUrl),alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"meta\",children:[/*#__PURE__*/_jsx(Link,{to:\"/recipe/\".concat(recipe._id),className:\"title\",children:recipe.title}),recipe.owner&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:12,color:'#64748b'},children:[\"By \",/*#__PURE__*/_jsx(\"a\",{href:\"/user/\".concat(recipe.owner._id||recipe.owner),onClick:e=>{e.preventDefault();openProfile(recipe.owner._id||recipe.owner);},children:recipe.owner.name||(typeof recipe.owner==='string'?recipe.owner:'Chef')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cal\",children:[recipe.caloriesTotal&&recipe.caloriesTotal>0?recipe.caloriesTotal:estimateCalories(recipe),\" kcal\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleFav,title:\"Favorite\",children:\"\\u2764\"}),onDelete&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.confirm('Delete this recipe? This cannot be undone.')){onDelete(recipe._id);}},title:\"Delete\",style:{marginLeft:8},children:\"\\uD83D\\uDDD1\"})]})]});}","map":{"version":3,"names":["React","estimateCalories","Link","api","jsx","_jsx","jsxs","_jsxs","RecipeCard","_ref","_process$env$REACT_AP","recipe","onChange","onDelete","toggleFav","post","concat","_id","err","console","error","base","process","env","REACT_APP_API_URL","replace","openProfile","id","window","dispatchEvent","CustomEvent","detail","className","children","imageUrl","src","alt","to","title","owner","style","fontSize","color","href","onClick","e","preventDefault","name","caloriesTotal","confirm","marginLeft"],"sources":["/home/navgurukul/Recipe-upload/my-mern-app/client/src/components/RecipeCard.jsx"],"sourcesContent":["import React from 'react';\nimport estimateCalories from '../services/calorieEstimator';\nimport { Link } from 'react-router-dom';\nimport api from '../services/api';\n\nexport default function RecipeCard({ recipe, onChange, onDelete }) {\n  const toggleFav = async () => {\n    try {\n      await api.post(`/recipes/${recipe._id}/favorite`);\n      onChange();\n    } catch (err) { console.error(err); }\n  };\n\n  const base = process.env.REACT_APP_API_URL?.replace('/api','') || 'http://localhost:5000';\n\n  const openProfile = (id) => {\n    // dispatch a custom event so feed/listening components can open the drawer\n    window.dispatchEvent(new CustomEvent('openProfileDrawer', { detail: { id } }));\n  };\n\n  return (\n    <div className=\"recipe-card card\">\n      {recipe.imageUrl && <img src={`${base}${recipe.imageUrl}`} alt=\"\" />}\n      <div className=\"meta\">\n        <Link to={`/recipe/${recipe._id}`} className=\"title\">{recipe.title}</Link>\n        {recipe.owner && <div style={{ fontSize:12, color:'#64748b' }}>By <a href={`/user/${recipe.owner._id || recipe.owner}`} onClick={e => { e.preventDefault(); openProfile(recipe.owner._id || recipe.owner); }}>{recipe.owner.name || (typeof recipe.owner === 'string' ? recipe.owner : 'Chef')}</a></div>}\n          <div className=\"cal\">{(recipe.caloriesTotal && recipe.caloriesTotal > 0 ? recipe.caloriesTotal : estimateCalories(recipe))} kcal</div>\n      </div>\n      <div className=\"actions\">\n        <button onClick={toggleFav} title=\"Favorite\">‚ù§</button>\n        {onDelete && (\n          <button onClick={() => {\n            if (window.confirm('Delete this recipe? This cannot be undone.')) {\n              onDelete(recipe._id);\n            }\n          }} title=\"Delete\" style={{ marginLeft: 8 }}>üóë</button>\n        )}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}